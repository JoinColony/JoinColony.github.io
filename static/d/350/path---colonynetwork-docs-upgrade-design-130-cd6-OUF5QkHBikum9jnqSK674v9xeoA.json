{"data":{"doc":{"editUrl":"https://github.com/JoinColony/colonyNetwork/edit/develop/docs/_Docs_Upgrades.md","frontmatter":{"title":"Upgrade design"},"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The contracts comprising the Colony Network are upgradeable using the Delegate Proxy design pattern."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Providing an upgrade path is important to allow for the continuous improvement of the Colony Network. At the same time, all depreciated versions of Colony should remain functional indefinitely after deployment, so that the organizations created are not predicated upon the actions/efforts of a third party."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In other words, upgrades to any individual colony on the network are \"opt-in\", while the network as a whole remains eternally backwards-compatible."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Delegate Proxy Pattern"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Interacting with both the Colony Network and individual colonies on the network is somewhat different than many other smart contract interactions that a blockchain developer might not be accustomed to."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Rather than calling functions directly from the contract in which they are deployed, all transactions are signed and sent to the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"EtherRouter"}]},{"type":"text","value":" contract."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Whenever a transaction is received by the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"EtherRouter"}]},{"type":"text","value":" contract, it looks the function up in a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Resolver"}]},{"type":"text","value":" contract, using the function signature."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Resolver"}]},{"type":"text","value":" contract contains a mapping of whitelisted function signatures to addresses ("},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"mapping ( bytes4 => address )"}]},{"type":"text","value":")."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A function signature lookup will return the address of the contracts that implement the desired function. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"EtherRouter"}]},{"type":"text","value":" in turn calls the function via "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"delegatecall"}]},{"type":"text","value":", and passes any returns from the call back to "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"msg.sender"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"img/delegateProxyCallchain_1.png","alt":"EtherRouter"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This pattern enables both fine-grained control of permissions for individual functions (see below), well as eternal backwards-compatibility following network upgrades."}]}],"data":{"quirksMode":false}}},"project":{"slug":"colonynetwork","name":"colonyNetwork","logo":"img/colonyNetwork_color.svg","logoSmall":"img/logomark_colonyNetwork_blue.svg","repoUrl":"https://github.com/JoinColony/colonyNetwork","sectionOrder":["intro","docs","bug-bounty-program","whitepaper-tldr","interface"],"sectionTranslations":null,"sections":[{"name":"Docs","slug":"docs","docs":[{"slug":"extensions","fields":{"locale":"en","slug":"/colonynetwork/docs-extensions"},"frontmatter":{"title":"Extensions","order":6,"section":"Docs"}},{"slug":"get-started","fields":{"locale":"en","slug":"/colonynetwork/docs-get-started"},"frontmatter":{"title":"Get Started","order":1,"section":"Docs"}},{"slug":"overview","fields":{"locale":"en","slug":"/colonynetwork/docs-overview"},"frontmatter":{"title":"Overview","order":2,"section":"Docs"}},{"slug":"modular-permissions","fields":{"locale":"en","slug":"/colonynetwork/docs-modular-permissions"},"frontmatter":{"title":"Modular Permissions","order":4,"section":"Docs"}},{"slug":"reputation-mining-client","fields":{"locale":"en","slug":"/colonynetwork/docs-reputation-mining-client"},"frontmatter":{"title":"Reputation Mining Client","order":5,"section":"Docs"}},{"slug":"upgrade-design","fields":{"locale":"en","slug":"/colonynetwork/docs-upgrade-design"},"frontmatter":{"title":"Upgrade design","order":3,"section":"Docs"}}]},{"name":"Interface","slug":"interface","docs":[{"slug":"icolony","fields":{"locale":"en","slug":"/colonynetwork/interface-icolony"},"frontmatter":{"title":"IColony","order":3,"section":"Interface"}},{"slug":"icolonynetwork","fields":{"locale":"en","slug":"/colonynetwork/interface-icolonynetwork"},"frontmatter":{"title":"IColonyNetwork","order":2,"section":"Interface"}},{"slug":"ietherrouter","fields":{"locale":"en","slug":"/colonynetwork/interface-ietherrouter"},"frontmatter":{"title":"IEtherRouter","order":1,"section":"Interface"}},{"slug":"imetacolony","fields":{"locale":"en","slug":"/colonynetwork/interface-imetacolony"},"frontmatter":{"title":"IMetaColony","order":4,"section":"Interface"}},{"slug":"irecovery","fields":{"locale":"en","slug":"/colonynetwork/interface-irecovery"},"frontmatter":{"title":"IRecovery","order":6,"section":"Interface"}},{"slug":"ireputationminingcycle","fields":{"locale":"en","slug":"/colonynetwork/interface-ireputationminingcycle"},"frontmatter":{"title":"IReputationMiningCycle","order":7,"section":"Interface"}},{"slug":"itokenlocking","fields":{"locale":"en","slug":"/colonynetwork/interface-itokenlocking"},"frontmatter":{"title":"ITokenLocking","order":5,"section":"Interface"}}]},{"name":"Intro","slug":"intro","docs":[{"slug":"welcome","fields":{"locale":"en","slug":"/colonynetwork/intro-welcome"},"frontmatter":{"title":"Welcome","order":0,"section":"Intro"}}]},{"name":"Whitepaper TL;DR","slug":"whitepaper-tldr","docs":[{"slug":"colony","fields":{"locale":"en","slug":"/colonynetwork/whitepaper-tldr-colony"},"frontmatter":{"title":"Colony","order":0,"section":"Whitepaper TL;DR"}},{"slug":"objections-and-disputes","fields":{"locale":"en","slug":"/colonynetwork/whitepaper-tldr-objections-and-disputes"},"frontmatter":{"title":"Objections and Disputes","order":7,"section":"Whitepaper TL;DR"}},{"slug":"domains-and-skills","fields":{"locale":"en","slug":"/colonynetwork/whitepaper-tldr-domains-and-skills"},"frontmatter":{"title":"Domains and Skills","order":5,"section":"Whitepaper TL;DR"}},{"slug":"glossary-of-terms","fields":{"locale":"en","slug":"/colonynetwork/whitepaper-tldr-glossary-of-terms"},"frontmatter":{"title":"Glossary of Terms","order":11,"section":"Whitepaper TL;DR"}},{"slug":"the-meta-colony-and-clny","fields":{"locale":"en","slug":"/colonynetwork/whitepaper-tldr-the-meta-colony-and-clny"},"frontmatter":{"title":"The Meta Colony and CLNY","order":8,"section":"Whitepaper TL;DR"}},{"slug":"pots-and-funding","fields":{"locale":"en","slug":"/colonynetwork/whitepaper-tldr-pots-and-funding"},"frontmatter":{"title":"Pots and Funding","order":6,"section":"Whitepaper TL;DR"}},{"slug":"reputation","fields":{"locale":"en","slug":"/colonynetwork/whitepaper-tldr-reputation"},"frontmatter":{"title":"Reputation","order":4,"section":"Whitepaper TL;DR"}},{"slug":"reputation-mining","fields":{"locale":"en","slug":"/colonynetwork/whitepaper-tldr-reputation-mining"},"frontmatter":{"title":"Reputation Mining","order":9,"section":"Whitepaper TL;DR"}},{"slug":"tasks-and-payments","fields":{"locale":"en","slug":"/colonynetwork/whitepaper-tldr-tasks-and-payments"},"frontmatter":{"title":"Tasks and Payments","order":3,"section":"Whitepaper TL;DR"}}]},{"name":"Bug Bounty Program","slug":"bug-bounty-program","docs":[{"slug":"overview","fields":{"locale":"en","slug":"/colonynetwork/bug-bounty-program-overview"},"frontmatter":{"title":"Overview","order":0,"section":"Bug Bounty Program"}},{"slug":"terms-and-conditions","fields":{"locale":"en","slug":"/colonynetwork/bug-bounty-program-terms-and-conditions"},"frontmatter":{"title":"Terms and Conditions","order":1,"section":"Bug Bounty Program"}}]}]},"allProject":{"edges":[{"node":{"name":"colonyNetwork"}},{"node":{"name":"colonyJS"}},{"node":{"name":"colonyStarter"}},{"node":{"name":"purser"}},{"node":{"name":"tailor"}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"docId":"12c41d59-393b-5622-b7cb-efbf792a4aa3","projectName":"colonyNetwork"}}